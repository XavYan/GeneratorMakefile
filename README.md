# GMK: The Generator Makefile

## Introduction
Creates a Makefile from gmk file

## What is GMK?
GMK is a python application who can be used to parse simple `.gmk` files into a Makefile. For example, this file:

```

require template hpair
require binary

set sourcepath: src
set headerpath: include
set binpath: bin
set executable: mani
set name: fracciones

module all compile
module clean phony: rm -rf *.o

```

into this Makefile:

```

CC=g++
INCLUDE=include
SRC=src
BIN=bin
INCLUDE=include
FILENAME=fracciones
EXECUTABLE=mani
EXINCLUDE=h
EXSRC=cpp
binary.o: binary.$(EXINCLUDE) binary.$(EXSRC)
	$(CC) $(CCFLAGS) -c -o binary.o $(SRC)/binary.$(EXSRC)
all: binary.o hpair.$(EXINCLUDE) $(EXECUTABLE).$(EXSRC)
	$(CC) $(CCFLAGS) -o $(FILENAME) binary.o $(EXECUTABLE).$(EXSRC)
clean:
	rm -rf *.o
.PHONY: clean

```

just executing `python3 main.py {GMK filename} {Makefile filename}`.

## Want to download to try yourself?
Simply clone this repository and execute `python3 main.py {GMK filename} {Makefile filename}`. If you want to name your Makefile with `Makefile` (a common name), you can skip this argument.

It has no library dependencies. Python 3.6.9 version or upper is required.

## Options for GMK files
If you want to use this program, you need to create your own GMK file. Don't worry, it's simple!

There are several options you need to know before you write a GMK file. They are divided into three categories.

### `require` category
This category is made to add modules (with the corresponding header and source files) dependency to the Makefile. It is simple to use. For example, if your program has a binary class, with both source and header files, to add it to the GMK file you can use `require binary`.

Sometimes you don't have a source file. Maybe because it is a template class. Don't worry, to add this class to your GMK file, indicating that this class has no source file, you can use `template` specification. For example, if you has a template class with header file is called `matrix`, you can add `require template matrix` to your GMK file.

### `setting` category
The are several settings you may to modify. For example, the name of the executable, the name of the different directories where source files and header files are in, or de extension of the source files. All of this can be modified using `set` option. For example:

- `set sourcepath: src`. It changes source directory location (current location by default) to `src` directory.
- `set name: main`. It sets the name of the executable generated by Makefile to `main`.
- `set executable: main`. It sets the name of the main program to `main`.

Here is a list of all available options:

| Option     | Description                                           | Default value          | Example                    |
| ---------- | ----------------------------------------------------- | -----------------------| -------------------------- |
| sourcepath | Sets source directory location to specified           | current location (`.`) | `set sourcepath: source`   |
| headerpath | Sets header directory location to specified           | current location (`.`) | `set headerpath: include`  |
| binpath    | Sets object directory location to specified           | current location (`.`) | `set binpath: bin`         |
| name       | Sets the name of the executable generated by Makefile | `main`                 | `set name: fractions`      |
| executable | Sets the name of the main program file to specified   | `main`                 | `set executable: __main`   |
| exsrc      | Sets the extension of source files                    | `cpp`                  | `set exsrc: cc`            |
| exinc      | Sets the extension of header files                    | `h`                    | `set exinc: hpp`           |

### `module` category
Modules are the way you can create your own modules. With this category you can select which module will create the executable. Here's the syntaxis:

`module {name of the module} compile`

With this you are saying that the module `{name of the module}` will compile all program. If you want the `all` module to compile the whole program simply use `module all compile`.

To create a .PHONY module you can use `module {name of the module} phony: {code this module use}`. For example, if you want the tipical `clean` module, which deletes all object files: `module clean phony: rm -rf *.o`.

**Still in progress**. This category still has much more to do, so be careful using it.

## Author
The author of this project is Himar Manuel Barqu√≠n Carrasco.